# 8.0新特性
- 1.优化器优化
- 2.json可一次获取多个key
- 3.删除ifm文件，优化系统数据字典
- 4.支持数据压缩
- 5.load优化，不再需要先创建一个表
- 6.新增系统参数，innodb_flush_neighbors默认关闭
- 7.undo redo日志支持加密
- 8.mysql现获取自增主键是启动时取max(id)，会添加系统表记录该信息

# 工作中遇到问题
- 1.unique 约束会导致命中率降低，比普通索引要好一点，数据库需要校验数据字段是否有重复，高并发下是有问题的
- 2.mysql不仅innodb引擎有事务概念，server层本身也有
- 3.添加主键表空间可能会收缩，因为有隐式主键
- 4.程序重试机制有可能造成数据库问题：server层卡住
- 5.增加字段出现表空间收缩现象：和数据库碎片整理原理类似，inplace和copy table
- 6.ddl语句看到主键冲突：修改期间，dml操作记录日志记录了错误的操作

# 锁
- 新get：
- server层锁：MDL元数据锁
- 主键锁：AI锁
- **范围锁避免：**
1.修改隔离级别到rc.
2.修改 innodb_locks_unsafe_for_binlog